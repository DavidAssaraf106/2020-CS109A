System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var t,e,n,s,r,i,o,c,a,f,l,d;return{setters:[function(a){t=a.o,e=a.c,n=a.a,s=a.b,r=a.I,i=a.r,o=a.g,c=a.q},function(t){a=t.s,f=t.l,l=t.n,d=t.q}],execute:function(){function u(t){const e=g();if(!e)return;h(t,e);const n=function(t,e){const n=function(t,e){const n=/^(diff-[0-9a-f]{32})(?:[L|R]\d+)?$/.exec(e);if(!n)return;const s=n[1],r=t.querySelector(`a[name='${s}']`);if(!r)return;const i=r.nextElementSibling;if(i&&!i.querySelector(".js-diff-load-container"))return;return i}(t,e);if(n)return n;return function(t,e){const n=/^(?:r|commitcomment-)(\d+)$/.exec(e);if(!n)return;const s=n[1],r=t.querySelector(`#diff-with-comment-${s}`);if(!r)return;return r.closest(".js-file")}(t,e)}(t,e);n&&(a(n),j(n))}function g(){return window.location.hash.slice(1)}function h(t,e){let n;n=e.match(/^diff-.+[LR]\d+-[LR]\d+/)?f(t.ownerDocument,e.substring(0,e.indexOf("-",5))):f(t.ownerDocument,e),n&&t.contains(n)&&(l(n),a(n))}function j(t){const e=s(t,".js-diff-entry-loader",r),n=s(t,".js-diff-placeholder",Element),i=s(t,"button.js-diff-load",HTMLButtonElement),o=s(t,".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=i.getAttribute("data-disable-with")||"",i.disabled=!0;const c=new URL(e.getAttribute("data-fragment-url")||"",window.location.origin);return e.src=c.toString(),e.data}t(".js-diff-progressive-container",(function(t){u(t);const e=t.querySelector(".js-diff-progressive-loader");e&&e.addEventListener("load",(function(){u(t)}))})),t(".js-diff-load-container",(function(t){const n=t.querySelector(".js-diff-entry-loader");n&&n.addEventListener("load",(function(){e(t,".js-file").classList.remove("hide-file-notes-toggle");const n=g();n&&h(t,n)}))})),n("click",".js-diff-load",(function(t){if(t.target.classList.contains("js-ignore-this"))return;j(e(t.currentTarget,".js-diff-load-container"))})),n("click",".js-rendered, .js-source",(function(t){const n=t.currentTarget;n.classList.contains("selected")?t.preventDefault():(function(t){const n=e(t,".js-file-header"),s=t.classList.contains("js-rendered"),r=t.classList.contains("js-source"),i=o(n,"data-short-path"),c=o(n,"data-anchor"),a=new URL(window.location.href,window.location.origin),f=new URLSearchParams(a.search.slice(1));a.hash=c,s?f.set("short_path",i):r&&f.delete("short_path");a.search=f.toString(),d(null,"",a.toString())}(n),function(t){for(const e of document.querySelectorAll(".js-rendered, .js-source"))e.classList.remove("selected"),e.removeAttribute("aria-current");t.classList.add("selected"),t.setAttribute("aria-current","true")}(n))})),i(".js-prose-diff-toggle-form",(async function(t,n){const r=e(t,".js-details-container"),i=s(r,".js-file-content"),o=await n.html();for(;i.lastChild;)i.removeChild(i.lastChild);i.append(o.html),r.classList.toggle("display-rich-diff"),r.classList.toggle("show-inline-notes")})),n("change",".js-diff-style-toggle input",(function(t){if(!(t.target instanceof Element))return;const n=e(t.target,".js-diff-settings");for(const e of c(n,".js-diff-style-toggle label"))e.classList.toggle("selected")})),n("click",".js-toc-retry",(function(t){if(!(t.target instanceof Element))return;const n=e(t.target,".select-menu"),r=s(n,"include-fragment"),i=o(r,"src");r.setAttribute("src",""),r.setAttribute("src",i)}))}}}));
//# sourceMappingURL=diffs-bootstrap-c0c6c843.js.map
